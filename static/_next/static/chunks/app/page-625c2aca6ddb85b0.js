(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{3698:function(e,s,t){Promise.resolve().then(t.bind(t,9257))},9257:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Home}});var a=t(7437),r=t(2265),n=t(6020),l=t(7042),o=t(3986);function cn(){for(var e=arguments.length,s=Array(e),t=0;t<e;t++)s[t]=arguments[t];return(0,o.m)((0,l.W)(s))}var d=t(6694);let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(d.fC,{ref:s,className:cn("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});i.displayName=d.fC.displayName;let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(d.Ee,{ref:s,className:cn("aspect-square h-full w-full",t),...r})});c.displayName=d.Ee.displayName;let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(d.NY,{ref:s,className:cn("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});m.displayName=d.NY.displayName;var f=t(7256),u=t(6061);let x=(0,u.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),g=r.forwardRef((e,s)=>{let{className:t,variant:r,size:n,asChild:l=!1,...o}=e,d=l?f.g7:"button";return(0,a.jsx)(d,{className:cn(x({variant:r,size:n,className:t})),ref:s,...o})});g.displayName="Button";let p=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:cn("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});p.displayName="Card";let h=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:cn("flex flex-col space-y-1.5 p-6",t),...r})});h.displayName="CardHeader";let w=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:cn("text-2xl font-semibold leading-none tracking-tight",t),...r})});w.displayName="CardTitle";let j=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:cn("text-sm text-muted-foreground",t),...r})});j.displayName="CardDescription";let v=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:cn("p-6 pt-0",t),...r})});v.displayName="CardContent";let N=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:cn("flex items-center p-6 pt-0",t),...r})});N.displayName="CardFooter";let b=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("textarea",{className:cn("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...r})});b.displayName="Textarea";var y=t(4738);let C=(0,y.Ue)()(e=>({selectedAgent:0,setSelectedAgent:s=>e({selectedAgent:s}),openChat:!1,setOpenChat:s=>e({openChat:s}),agents:[{agentId:0,messages:[{message:"hi im agent 0",role:"agent"}]},{agentId:1,messages:[{message:"hi im agent 1",role:"agent"}]},{agentId:2,messages:[{message:"hi im agent 2",role:"user"}]}],addAgent:s=>e(e=>({agents:[...e.agents,s]})),addMessage:(s,t)=>e(e=>({agents:e.agents.map(e=>e.agentId===t?{...e,messages:[...e.messages,s]}:e)}))}));function Chat(e){let{startAgent:s,runAgent:t}=e,[l,o]=r.useState(""),d=l.trim().length,m=C(e=>e.setOpenChat),f=C(e=>e.setSelectedAgent),u=C(e=>e.selectedAgent),x=C(e=>e.agents),w=C(e=>e.addMessage);return(0,a.jsxs)(p,{className:"flex flex-col justify-between w-full h-full rounded-b-none rounded-tr-none",children:[(0,a.jsxs)("div",{className:"flex flex-col overflow-hidden",children:[(0,a.jsxs)("div",{className:"flex flex-row items-center p-4 space-x-2",children:[x.map((e,s)=>(0,a.jsxs)(g,{onClick:()=>{f(s)},children:["Agent ",e.agentId]},s)),(0,a.jsx)("div",{children:(0,a.jsx)(g,{variant:"destructive",onClick:()=>{s({agent_name:"assistant",message:"what is your purpose"})},children:"Start Agent"})})]}),(0,a.jsxs)(h,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)(i,{className:"p-1 rounded-none",children:(0,a.jsx)(c,{src:"/images/agent.svg",alt:"Image"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("p",{className:"text-sm font-medium leading-none",children:["Agent ",x[u].agentId]})})]}),(0,a.jsx)("span",{onClick:()=>m(!1),className:"cursor-pointer",children:(0,a.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})})]}),(0,a.jsxs)(v,{className:"flex flex-col gap-2 overflow-scroll",children:[x[u].messages.map((e,s)=>(0,a.jsx)("div",{className:cn("flex w-max max-w-[75%] flex-col gap-2 rounded-lg px-3 py-2 text-sm","user"===e.role?"ml-auto bg-primary text-primary-foreground":"bg-muted"),children:e.message},s)),(0,a.jsx)("div",{className:"space-y-4"})]})]}),(0,a.jsx)(N,{children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),0!==d&&(w({message:l,role:"user"},u),t({message:l,agent_name:"assistant"}),o(""))},className:"flex items-center w-full space-x-2",children:[(0,a.jsx)(b,{id:"message",placeholder:"Type your message...",className:"flex-1",autoComplete:"off",value:l,onChange:e=>o(e.target.value)}),(0,a.jsxs)(g,{type:"submit",size:"icon",disabled:0===d,children:[(0,a.jsx)(n.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Send"})]})]})})]})}var k=t(6816),A=t(1611),R=t(105);t(715);var flow_sidebar=()=>{let onDragStart=(e,s)=>{e.dataTransfer.setData("application/reactflow",s),e.dataTransfer.effectAllowed="move"};return(0,a.jsxs)("div",{className:"w-48 p-4 space-y-2 border-r",children:[(0,a.jsx)("p",{children:"Agents"}),(0,a.jsx)("div",{onDragStart:e=>onDragStart(e,"customDefault"),draggable:!0,children:"Default Node"}),(0,a.jsx)("div",{onDragStart:e=>onDragStart(e,"customInput"),draggable:!0,children:"Input Node"}),(0,a.jsx)("div",{onDragStart:e=>onDragStart(e,"customOutput"),draggable:!0,children:"Output Node"})]})};let Z=(0,r.memo)(function(e){let{data:s,type:t}=e;return(0,a.jsxs)("div",{className:"px-4 py-2 border rounded-md shadow-md bg-card",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"text-lg font-bold",children:s.name})}),t,(0,a.jsx)(k.HH,{type:"target",position:k.Ly.Top,className:"w-16"}),(0,a.jsx)(k.HH,{type:"source",position:k.Ly.Bottom,className:"w-16"})]})}),_=(0,r.memo)(function(e){let{data:s,type:t}=e;return(0,a.jsxs)("div",{className:"px-4 py-2 border rounded-md shadow-md bg-card",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"text-lg font-bold",children:s.name})}),t,(0,a.jsx)(k.HH,{type:"source",position:k.Ly.Bottom,className:"w-16"})]})}),D=(0,r.memo)(function(e){let{data:s,type:t}=e;return(0,a.jsxs)("div",{className:"px-4 py-2 border rounded-md shadow-md bg-card",children:[(0,a.jsx)("div",{className:"flex",children:(0,a.jsx)("div",{className:"text-lg font-bold",children:s.name})}),t,(0,a.jsx)(k.HH,{type:"target",position:k.Ly.Top,className:"w-16"})]})}),S={customInput:_,customOutput:D,customDefault:Z},H=[{id:"1",type:"customInput",data:{name:"Coder",isRunning:!1},position:{x:0,y:50}},{id:"2",type:"customDefault",data:{name:"Designer",isRunning:!1},position:{x:-200,y:200}}],I=0,getId=()=>"dndnode_".concat(I++);var flow=()=>{let e=(0,r.useRef)(null),[s,t,n]=(0,k.Rr)(H),[l,o,d]=(0,k.ll)([]),[i,c]=(0,r.useState)(null),m=C(e=>e.setOpenChat),f=(0,r.useCallback)(e=>o(s=>(0,k.Z_)(e,s)),[]),u=(0,r.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),x=(0,r.useCallback)(s=>{s.preventDefault();let a=e.current.getBoundingClientRect(),r=s.dataTransfer.getData("application/reactflow");if(void 0===r||!r)return;let n=i.project({x:s.clientX-a.left,y:s.clientY-a.top}),l={id:getId(),type:r,position:n,data:{label:"".concat(r," node"),name:"Designer",isRunning:!1}};t(e=>e.concat(l))},[i]);return(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(k.tV,{children:(0,a.jsxs)("div",{className:"flex w-full h-full",children:[(0,a.jsx)(flow_sidebar,{}),(0,a.jsx)("div",{className:"w-full h-full",ref:e,children:(0,a.jsxs)(k.x$,{nodes:s,edges:l,onNodesChange:n,onEdgesChange:d,onConnect:f,onInit:c,onDrop:x,onDragOver:u,fitView:!0,onNodeClick:(e,s)=>{m(!0),console.log("click node",s)},nodeTypes:S,children:[(0,a.jsx)(A.Z,{}),(0,a.jsx)(R.A,{color:"#444",variant:R.T.Dots})]})})]})})})},V=t(4135),T=t(3088),L=t(6435),O=t(7243),M=t(7158),z=t(2442),B=t(6369);let E=O.fC,F=O.xz;O.ZA,O.Uv,O.Tr,O.Ee;let U=r.forwardRef((e,s)=>{let{className:t,inset:r,children:n,...l}=e;return(0,a.jsxs)(O.fF,{ref:s,className:cn("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t),...l,children:[n,(0,a.jsx)(M.Z,{className:"ml-auto h-4 w-4"})]})});U.displayName=O.fF.displayName;let Y=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.tu,{ref:s,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})});Y.displayName=O.tu.displayName;let J=r.forwardRef((e,s)=>{let{className:t,sideOffset:r=4,...n}=e;return(0,a.jsx)(O.Uv,{children:(0,a.jsx)(O.VY,{ref:s,sideOffset:r,className:cn("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})})});J.displayName=O.VY.displayName;let W=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(O.ck,{ref:s,className:cn("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t),...n})});W.displayName=O.ck.displayName;let q=r.forwardRef((e,s)=>{let{className:t,children:r,checked:n,...l}=e;return(0,a.jsxs)(O.oC,{ref:s,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...l,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.wU,{children:(0,a.jsx)(z.Z,{className:"h-4 w-4"})})}),r]})});q.displayName=O.oC.displayName;let G=r.forwardRef((e,s)=>{let{className:t,children:r,...n}=e;return(0,a.jsxs)(O.Rk,{ref:s,className:cn("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(O.wU,{children:(0,a.jsx)(B.Z,{className:"h-2 w-2 fill-current"})})}),r]})});G.displayName=O.Rk.displayName;let P=r.forwardRef((e,s)=>{let{className:t,inset:r,...n}=e;return(0,a.jsx)(O.__,{ref:s,className:cn("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...n})});P.displayName=O.__.displayName;let X=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(O.Z0,{ref:s,className:cn("-mx-1 my-1 h-px bg-muted",t),...r})});function ThemeSwitcher(){let{setTheme:e}=(0,L.F)();return(0,a.jsxs)(E,{children:[(0,a.jsx)(F,{asChild:!0,children:(0,a.jsxs)(g,{variant:"outline",size:"icon",children:[(0,a.jsx)(V.Z,{className:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,a.jsx)(T.Z,{className:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}),(0,a.jsxs)(J,{align:"end",children:[(0,a.jsx)(W,{onClick:()=>e("light"),children:"Light"}),(0,a.jsx)(W,{onClick:()=>e("dark"),children:"Dark"}),(0,a.jsx)(W,{onClick:()=>e("system"),children:"System"})]})]})}X.displayName=O.Z0.displayName;var $=t(1396),K=t.n($);function Navigation(){return(0,a.jsxs)("div",{className:"z-10 flex items-center justify-between p-4 border-b",children:[(0,a.jsx)("h1",{children:"Agentsflow"}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(K(),{href:"https://github.com/jaemil/agentsflow",children:"Github"}),(0,a.jsx)(ThemeSwitcher,{})]})]})}function SideBar(){let e=C(e=>e.setOpenChat);return(0,a.jsx)("div",{className:"w-48 h-full p-4 border-r",children:(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(g,{onClick:()=>e(!1),variant:"secondary",className:"justify-start w-full",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",className:"w-4 h-4 mr-2",children:(0,a.jsx)("path",{id:"Icon_metro-flow-branch","data-name":"Icon metro-flow-branch",d:"M19.552,6.153A2.143,2.143,0,1,0,16.5,8.088c-.073,1.414-1.134,1.895-2.978,2.586a11.655,11.655,0,0,0-2.365,1.1V8.1a2.143,2.143,0,1,0-1.786,0v6.829a2.143,2.143,0,1,0,1.8.007c.073-1.413,1.135-1.895,2.978-2.586,1.812-.68,4.054-1.528,4.143-4.246a2.141,2.141,0,0,0,1.258-1.947ZM10.266,4.917A1.237,1.237,0,1,1,9.031,6.153a1.236,1.236,0,0,1,1.236-1.237Zm0,13.187A1.237,1.237,0,1,1,11.5,16.867,1.237,1.237,0,0,1,10.266,18.1ZM17.409,7.39a1.237,1.237,0,1,1,1.236-1.237A1.237,1.237,0,0,1,17.409,7.39Z",transform:"translate(-6.338 -4.01)",fill:"currentColor"})}),"Flow"]}),(0,a.jsxs)(g,{onClick:()=>e(!0),variant:"ghost",className:"justify-start w-full",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",className:"w-4 h-4 mr-2",children:(0,a.jsx)("path",{id:"Icon_awesome-robot","data-name":"Icon awesome-robot",d:"M0,6V9a.749.749,0,0,0,.75.75H1.5V5.25H.75A.749.749,0,0,0,0,6ZM10.875,2.25H8.25V.75a.75.75,0,1,0-1.5,0v1.5H4.125A1.874,1.874,0,0,0,2.25,4.125V10.5A1.5,1.5,0,0,0,3.75,12h7.5a1.5,1.5,0,0,0,1.5-1.5V4.125A1.874,1.874,0,0,0,10.875,2.25ZM6,9.75H4.5V9H6ZM5.25,6.938A.938.938,0,1,1,6.187,6,.937.937,0,0,1,5.25,6.938Zm3,2.813H6.75V9h1.5Zm2.25,0H9V9h1.5ZM9.75,6.938A.938.938,0,1,1,10.688,6,.937.937,0,0,1,9.75,6.938Zm4.5-1.688H13.5v4.5h.75A.749.749,0,0,0,15,9V6A.749.749,0,0,0,14.25,5.25Z",transform:"translate(0 1.5)",fill:"currentColor"})}),"Agents"]}),(0,a.jsxs)(g,{variant:"ghost",className:"justify-start w-full",children:[(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"15",height:"15",viewBox:"0 0 15 15",className:"w-4 h-4 mr-2",children:(0,a.jsx)("path",{id:"Icon_material-folder","data-name":"Icon material-folder",d:"M9,6H4.5A1.5,1.5,0,0,0,3.008,7.5L3,16.5A1.5,1.5,0,0,0,4.5,18h12A1.5,1.5,0,0,0,18,16.5V9a1.5,1.5,0,0,0-1.5-1.5h-6Z",transform:"translate(-3 -4)",fill:"currentColor"})}),"Files"]})]})})}function Home(){let e=C(e=>e.openChat),s=C(e=>e.addMessage),t=(0,r.useRef)(null);return(0,r.useEffect)(()=>(t.current=new WebSocket("ws://localhost:8999/ws"),t.current.onopen=()=>{console.log("ws opened")},t.current.onclose=()=>{console.log("ws closed")},t.current.onmessage=e=>{console.log(e.data),s({message:JSON.parse(e.data).message,role:"agent"},0)},console.log("test"),()=>{t.current.close()}),[]),(0,a.jsxs)("main",{className:"grid w-screen h-screen grid-cols-[0fr_1fr] grid-rows-[0fr_1fr] gap-0",children:[(0,a.jsx)("div",{className:"flex flex-col col-span-4",children:(0,a.jsx)(Navigation,{})}),(0,a.jsx)("div",{className:"col-span-1 col-start-1 row-start-2",children:(0,a.jsx)(SideBar,{})}),(0,a.jsx)("div",{className:"col-span-3 col-start-2 row-start-2",children:(0,a.jsx)(flow,{})}),(0,a.jsx)("div",{className:cn("transition-all absolute top-0 right-0 w-full h-screen pt-28 max-w-3xl",{"translate-x-0 w-full":e,"translate-x-full":!e}),children:(0,a.jsx)(Chat,{startAgent:e=>{let{agent_name:s,message:a}=e;t.current.send(JSON.stringify({action:"start_agent",agent_name:s,message:a}))},runAgent:e=>{let{agent_name:s,message:a}=e;t.current.send(JSON.stringify({action:"send_message",agent_name:s,message:a}))}})})]})}}},function(e){e.O(0,[780,58,971,864,744],function(){return e(e.s=3698)}),_N_E=e.O()}]);